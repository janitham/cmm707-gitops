apiVersion: batch/v1
kind: CronJob
metadata:
  name: integrationtest
  namespace: {{ include "registration.namespace" . }}
spec:
  schedule: "* * * * *"
  jobTemplate:
    spec:
      template:
        spec:
          containers:
            - name: testcontainer
              image: broadinstitute/python-requests
              imagePullPolicy: IfNotPresent
              command: [ "/bin/sh", "-c", "ls" ]
              #command:
              #  - python
              #  - --version
              volumeMounts:
                - name: "test"
                  mountPath: "/"
                  subPath: "registration-test-suite.py"
                - name: "test"
                  mountPath: "/"
                  subPath: "summary-test-suite.py"
          restartPolicy: OnFailure
          volumes:
            - name: "test"
              configMap:
                name: "testsuites"